
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://haller-erne.github.io/ogs/libs/_template_/">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.0.12">
    
    
      
        <title>Ability - OGS Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.0d440cfe.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.2505c338.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#ability" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="OGS Documentation" class="md-header__button md-logo" aria-label="OGS Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OGS Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Ability
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="OGS Documentation" class="md-nav__button md-logo" aria-label="OGS Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    OGS Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Tool configuration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Tool configuration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/remote-tool/" class="md-nav__link">
        Remote Tool
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
      
      
      
        <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
          Open Protocol Tools
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          Open Protocol Tools
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/openprotocol/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/openprotocol/nexo.md" class="md-nav__link">
        Nexo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/openprotocol/sys350.md" class="md-nav__link">
        CS351/KE350
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/openprotocol/gwk.md" class="md-nav__link">
        GWK Operator+
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Scripting
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Scripting
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../v3/getting-started/" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
      
      
      
        <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
          LUA interfaces
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          LUA interfaces
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../v3/lua/webbrowser/" class="md-nav__link">
        Web browsers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../v3/lua/webserver/" class="md-nav__link">
        Webserver (and REST API)
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          LUA helper libraries
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          LUA helper libraries
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../lua-ads/" class="md-nav__link">
        ADS communication (TwinCat, Nexeed, Beckhoff)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../lua-opcua/" class="md-nav__link">
        OpcUA communication
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../lua-modbus/" class="md-nav__link">
        Modbus/TCP/UDP communication
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../lua-hid/" class="md-nav__link">
        USB HID Devices (Buttons, Arduino, etc.)
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#properties" class="md-nav__link">
    Properties
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functions" class="md-nav__link">
    Functions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#events" class="md-nav__link">
    Events
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    Examples
  </a>
  
    <nav class="md-nav" aria-label="Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#castevent" class="md-nav__link">
    castEvent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cooldownevent" class="md-nav__link">
    cooldownEvent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#executeevent" class="md-nav__link">
    executeEvent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interruptedevent" class="md-nav__link">
    interruptedEvent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#readyevent" class="md-nav__link">
    readyEvent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recoveryevent" class="md-nav__link">
    recoveryEvent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tickevent" class="md-nav__link">
    tickEvent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#activate" class="md-nav__link">
    Activate
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advancephase" class="md-nav__link">
    AdvancePhase
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getcurrentphase" class="md-nav__link">
    GetCurrentPhase
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getcurrentphase_1" class="md-nav__link">
    GetCurrentPhase
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getphasetimeremaining" class="md-nav__link">
    GetPhaseTimeRemaining
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gettargetdata" class="md-nav__link">
    GetTargetData
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#settargetdata" class="md-nav__link">
    SetTargetData
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interrupt" class="md-nav__link">
    Interrupt
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#actionname" class="md-nav__link">
    actionName
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#animation" class="md-nav__link">
    animation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#canactivatewhiledead" class="md-nav__link">
    canActivateWhileDead
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#canbeprevented" class="md-nav__link">
    canBePrevented
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#castphasesettings" class="md-nav__link">
    castPhaseSettings
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#executephasesettings" class="md-nav__link">
    executePhaseSettings
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recoveryphasesettings" class="md-nav__link">
    recoveryPhaseSettings
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cooldownphasesettings" class="md-nav__link">
    cooldownPhaseSettings
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#isenabled" class="md-nav__link">
    isEnabled
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#owner" class="md-nav__link">
    owner
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tutorials" class="md-nav__link">
    Tutorials
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="ability"><a class="toclink" href="#ability">Ability</a></h1>
<p>Abilities are CoreObjects that can be added to Players and guide the Player's animation in sync with the Ability's state machine. Spawn an Ability with <code>World.SpawnAsset()</code> or add an Ability as a child of an Equipment/Weapon to have it be assigned to the Player automatically when that item is equipped.</p>
<p>Abilities can be activated by association with an Action Binding. Their internal state machine flows through the phases: Ready, Cast, Execute, Recovery, and Cooldown. An Ability begins in the Ready state and transitions to Cast when its Binding (for example Left mouse click) is activated by the owning player. It then automatically flows from Cast to Execute, then Recovery and finally Cooldown. At each of these state transitions it fires a corresponding event.</p>
<p>Only one ability can be active at a time. By default, activating an ability will interrupt the currently active ability. The <code>canBePrevented</code> and <code>preventsOtherAbilities</code> properties can be used to customize interruption rules for competing abilities.</p>
<p>If an ability is interrupted during the Cast phase, it will immediately reset to the Ready state. If an ability is interrupted during the Execute or Recovery phase, the ability will immediately transition to the Cooldown phase.</p>
<h2 id="properties"><a class="toclink" href="#properties">Properties</a></h2>
<table>
<thead>
<tr>
<th>Property Name</th>
<th>Return Type</th>
<th>Description</th>
<th>Tags</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>isEnabled</code></td>
<td><code>boolean</code></td>
<td>Turns an Ability on/off. It stays on the Player but is interrupted if <code>isEnabled</code> is set to <code>false</code> during an active Ability. True by default.</td>
<td>Read-Write</td>
</tr>
<tr>
<td><code>canActivateWhileDead</code></td>
<td><code>boolean</code></td>
<td>Indicates if the Ability can be used while the owning Player is dead. False by default.</td>
<td>Read-Only</td>
</tr>
<tr>
<td><code>name</code></td>
<td><code>string</code></td>
<td>The name of the Ability.</td>
<td>Read-Only</td>
</tr>
<tr>
<td><code>actionBinding</code></td>
<td><code>string</code></td>
<td><em>This property is deprecated. Please use <code>actionName</code> instead, but note that <code>actionBinding</code> and <code>actionName</code> use different values.</em>  Which action binding will cause the Ability to activate. Possible values of the bindings are listed on the <a href="../api/key_bindings.md">Ability binding</a> page.</td>
<td>Read-Only, <abbr title='This API is deprecated and might be removed in a future version.'><strong>Deprecated</strong></abbr></td>
</tr>
<tr>
<td><code>actionName</code></td>
<td><code>string</code></td>
<td>Which binding set action name will cause the Ability to activate. See <a href="../references/binding_sets.md">Binding Sets</a> reference.</td>
<td>Read-Only</td>
</tr>
<tr>
<td><code>owner</code></td>
<td><a href="player.md"><code>Player</code></a></td>
<td>Assigning an owner applies the Ability to that Player.</td>
<td>Read-Write</td>
</tr>
<tr>
<td><code>castPhaseSettings</code></td>
<td><a href="abilityphasesettings.md"><code>AbilityPhaseSettings</code></a></td>
<td>Config data for the Cast phase (see below).</td>
<td>Read-Only</td>
</tr>
<tr>
<td><code>executePhaseSettings</code></td>
<td><a href="abilityphasesettings.md"><code>AbilityPhaseSettings</code></a></td>
<td>Config data for the Execute phase.</td>
<td>Read-Only</td>
</tr>
<tr>
<td><code>recoveryPhaseSettings</code></td>
<td><a href="abilityphasesettings.md"><code>AbilityPhaseSettings</code></a></td>
<td>Config data for the Recovery phase.</td>
<td>Read-Only</td>
</tr>
<tr>
<td><code>cooldownPhaseSettings</code></td>
<td><a href="abilityphasesettings.md"><code>AbilityPhaseSettings</code></a></td>
<td>Config data for the Cooldown phase.</td>
<td>Read-Only</td>
</tr>
<tr>
<td><code>animation</code></td>
<td><code>string</code></td>
<td>Name of the animation the Player will play when the Ability is activated. Possible values: See <a href="../api/animations.md">Ability Animation</a> for strings and other info.</td>
<td>Read-Only</td>
</tr>
<tr>
<td><code>canBePrevented</code></td>
<td><code>boolean</code></td>
<td>Used in conjunction with the phase property <code>preventsOtherAbilities</code> so multiple abilities on the same Player can block each other during specific phases. True by default.</td>
<td>Read-Only</td>
</tr>
</tbody>
</table>
<h2 id="functions"><a class="toclink" href="#functions">Functions</a></h2>
<table>
<thead>
<tr>
<th>Function Name</th>
<th>Return Type</th>
<th>Description</th>
<th>Tags</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Activate()</code></td>
<td><code>None</code></td>
<td>Activates an Ability as if the button had been pressed.</td>
<td>None</td>
</tr>
<tr>
<td><code>Interrupt()</code></td>
<td><code>None</code></td>
<td>Changes an Ability from Cast phase to Ready phase. If the Ability is in either Execute or Recovery phases it instead goes to Cooldown phase.</td>
<td>None</td>
</tr>
<tr>
<td><code>AdvancePhase()</code></td>
<td><code>None</code></td>
<td>Advances a currently active Ability from its current phase to the next phase. For example, an ability in the Cast phase will begin the Execute phase, an ability on cooldown will become ready, etc.</td>
<td>None</td>
</tr>
<tr>
<td><code>GetCurrentPhase()</code></td>
<td><a href="enums.md#abilityphase"><code>AbilityPhase</code></a></td>
<td>The current AbilityPhase for this Ability. These are returned as one of: AbilityPhase.READY, AbilityPhase.CAST, AbilityPhase.EXECUTE, AbilityPhase.RECOVERY and AbilityPhase.COOLDOWN.</td>
<td>None</td>
</tr>
<tr>
<td><code>GetCurrentPhaseSettings()</code></td>
<td><a href="abilityphasesettings.md"><code>AbilityPhaseSettings</code></a></td>
<td>Returns the settings for the current phase of this Ability. Returns <code>nil</code> if the current phase is <code>AbilityPhase.READY</code>.</td>
<td>None</td>
</tr>
<tr>
<td><code>GetPhaseTimeRemaining()</code></td>
<td><code>number</code></td>
<td>Seconds left in the current phase.</td>
<td>None</td>
</tr>
<tr>
<td><code>GetTargetData()</code></td>
<td><a href="abilitytarget.md"><code>AbilityTarget</code></a></td>
<td>Returns information about what the Player has targeted this phase.</td>
<td>None</td>
</tr>
<tr>
<td><code>SetTargetData(AbilityTarget)</code></td>
<td><code>None</code></td>
<td>Updates information about what the Player has targeted this phase. This can affect the execution of the Ability.</td>
<td>None</td>
</tr>
</tbody>
</table>
<h2 id="events"><a class="toclink" href="#events">Events</a></h2>
<table>
<thead>
<tr>
<th>Event Name</th>
<th>Return Type</th>
<th>Description</th>
<th>Tags</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>readyEvent</code></td>
<td><a href="event.md"><code>Event</code></a>&lt;<a href="ability.md"><code>Ability</code></a>&gt;</td>
<td>Fired when the Ability becomes ready. In this phase it is possible to activate it again.</td>
<td>None</td>
</tr>
<tr>
<td><code>castEvent</code></td>
<td><a href="event.md"><code>Event</code></a>&lt;<a href="ability.md"><code>Ability</code></a>&gt;</td>
<td>Fired when the Ability enters the Cast phase.</td>
<td>None</td>
</tr>
<tr>
<td><code>executeEvent</code></td>
<td><a href="event.md"><code>Event</code></a>&lt;<a href="ability.md"><code>Ability</code></a>&gt;</td>
<td>Fired when the Ability enters Execute phase.</td>
<td>None</td>
</tr>
<tr>
<td><code>recoveryEvent</code></td>
<td><a href="event.md"><code>Event</code></a>&lt;<a href="ability.md"><code>Ability</code></a>&gt;</td>
<td>Fired when the Ability enters Recovery.</td>
<td>None</td>
</tr>
<tr>
<td><code>cooldownEvent</code></td>
<td><a href="event.md"><code>Event</code></a>&lt;<a href="ability.md"><code>Ability</code></a>&gt;</td>
<td>Fired when the Ability enters Cooldown.</td>
<td>None</td>
</tr>
<tr>
<td><code>interruptedEvent</code></td>
<td><a href="event.md"><code>Event</code></a>&lt;<a href="ability.md"><code>Ability</code></a>&gt;</td>
<td>Fired when the Ability is interrupted.</td>
<td>None</td>
</tr>
<tr>
<td><code>tickEvent</code></td>
<td><a href="event.md"><code>Event</code></a>&lt;<a href="ability.md"><code>Ability</code></a> ability, <code>number</code> deltaTime&gt;</td>
<td>Fired every tick while the Ability is active (isEnabled = true and phase is not ready).</td>
<td>None</td>
</tr>
</tbody>
</table>
<h2 id="examples"><a class="toclink" href="#examples">Examples</a></h2>
<p>Example using:</p>
<h3 id="castevent"><a class="toclink" href="#castevent"><code>castEvent</code></a></h3>
<p>The Cast phase begins as soon as an ability is activated. By checking if the player casting the ability <code>isGrounded</code> we can create an effect that propels you upwards, but it doesn't work if you are already jumping or flying. We detect this is the <code>castEvent</code>, which is early enough for an <code>Interrupt()</code> to reset the ability.</p>
<div class="highlight"><pre><span></span><code><span class="c1">--Server script</span>
<span class="kd">local</span> <span class="n">ability</span> <span class="o">=</span> <span class="n">script</span><span class="p">.</span><span class="n">parent</span>

<span class="kr">function</span> <span class="nf">OnCast</span><span class="p">(</span><span class="n">ability</span><span class="p">)</span>
    <span class="kr">if</span> <span class="n">ability</span><span class="p">.</span><span class="n">owner</span><span class="p">.</span><span class="n">isGrounded</span> <span class="kr">then</span>
        <span class="n">ability</span><span class="p">.</span><span class="n">owner</span><span class="p">:</span><span class="n">SetVelocity</span><span class="p">(</span><span class="n">Vector3</span><span class="p">.</span><span class="n">UP</span> <span class="o">*</span> <span class="mi">2000</span><span class="p">)</span>
    <span class="kr">else</span>
        <span class="n">ability</span><span class="p">:</span><span class="n">Interrupt</span><span class="p">()</span>
    <span class="kr">end</span>
<span class="kr">end</span>

<span class="n">ability</span><span class="p">.</span><span class="n">castEvent</span><span class="p">:</span><span class="n">Connect</span><span class="p">(</span><span class="n">OnCast</span><span class="p">)</span>
</code></pre></div>
<p>See also: <a href="coreobject.md">CoreObject.parent</a> | <a href="ability.md">Ability.owner</a> | <a href="player.md">Player.isGrounded</a> | <a href="vector3.md">Vector3.UP</a> | <a href="event.md">Event.Connect</a></p>
<hr />
<p>Example using:</p>
<h3 id="cooldownevent"><a class="toclink" href="#cooldownevent"><code>cooldownEvent</code></a></h3>
<p>In this example, a fighting game has an "invincible" mechanic where player attacks are not interrupted while they have this effect. Some powerful attacks make the player invincible during the entire active cycle of the ability. The effect is gained at the beginning of the cast phase and is removed at the end of the recovery phase, before the cooldown begins. The resource system is used in keeping track of the invincibility effect.</p>
<div class="highlight"><pre><span></span><code><span class="c1">--Server script</span>
<span class="kd">local</span> <span class="n">ability</span> <span class="o">=</span> <span class="n">script</span><span class="p">.</span><span class="n">parent</span>

<span class="kr">function</span> <span class="nf">OnCast</span><span class="p">(</span><span class="n">ability</span><span class="p">)</span>
    <span class="n">ability</span><span class="p">.</span><span class="n">owner</span><span class="p">:</span><span class="n">AddResource</span><span class="p">(</span><span class="s2">&quot;invincible&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nf">OnCooldown</span><span class="p">(</span><span class="n">ability</span><span class="p">)</span>
    <span class="n">ability</span><span class="p">.</span><span class="n">owner</span><span class="p">:</span><span class="n">RemoveResource</span><span class="p">(</span><span class="s2">&quot;invincible&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="kr">end</span>

<span class="n">ability</span><span class="p">.</span><span class="n">castEvent</span><span class="p">:</span><span class="n">Connect</span><span class="p">(</span><span class="n">OnCast</span><span class="p">)</span>
<span class="n">ability</span><span class="p">.</span><span class="n">cooldownEvent</span><span class="p">:</span><span class="n">Connect</span><span class="p">(</span><span class="n">OnCooldown</span><span class="p">)</span>
</code></pre></div>
<p>See also: <a href="coreobject.md">CoreObject.parent</a> | <a href="player.md">Player.owner</a> | <a href="ability.md">Ability.castEvent</a> | <a href="event.md">Event.Connect</a></p>
<hr />
<p>Example using:</p>
<h3 id="executeevent"><a class="toclink" href="#executeevent"><code>executeEvent</code></a></h3>
<p>Weapons implement lots of built-in gameplay that doesn't require any scripting, such as attack and reload abilities. However, they can be augmented with additional mechanics. In this example, a special sound effect is played when a weapon shoots while low on ammunition. The script expects to be a child of a weapon's "Shoot" ability.</p>
<div class="highlight"><pre><span></span><code><span class="c1">--Server script</span>
<span class="kd">local</span> <span class="n">ability</span> <span class="o">=</span> <span class="n">script</span><span class="p">.</span><span class="n">parent</span>
<span class="kd">local</span> <span class="n">weapon</span> <span class="o">=</span> <span class="n">script</span><span class="p">:</span><span class="n">FindAncestorByType</span><span class="p">(</span><span class="s1">&#39;Weapon&#39;</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">lowAmmoSound</span> <span class="o">=</span> <span class="n">script</span><span class="p">:</span><span class="n">GetCustomProperty</span><span class="p">(</span><span class="s2">&quot;LowAmmoSound&quot;</span><span class="p">)</span>

<span class="kd">local</span> <span class="n">LOW_AMMO_PERCENTAGE</span> <span class="o">=</span> <span class="mf">0.2</span>

<span class="kr">function</span> <span class="nf">OnExecute</span><span class="p">(</span><span class="n">ability</span><span class="p">)</span>
    <span class="kr">if</span> <span class="n">weapon</span><span class="p">.</span><span class="n">currentAmmo</span> <span class="o">/</span> <span class="n">weapon</span><span class="p">.</span><span class="n">maxAmmo</span> <span class="o">&lt;=</span> <span class="n">LOW_AMMO_PERCENTAGE</span> <span class="kr">then</span>
        <span class="n">World</span><span class="p">.</span><span class="n">SpawnAsset</span><span class="p">(</span><span class="n">lowAmmoSound</span><span class="p">,</span> <span class="p">{</span><span class="n">position</span> <span class="o">=</span> <span class="n">weapon</span><span class="p">:</span><span class="n">GetWorldPosition</span><span class="p">()})</span>
    <span class="kr">end</span>
<span class="kr">end</span>

<span class="n">ability</span><span class="p">.</span><span class="n">executeEvent</span><span class="p">:</span><span class="n">Connect</span><span class="p">(</span><span class="n">OnExecute</span><span class="p">)</span>
</code></pre></div>
<p>See also: <a href="coreobject.md">CoreObject.parent</a> | <a href="weapon.md">Weapon.currentAmmo</a> | <a href="world.md">World.SpawnAsset</a> | <a href="ability.md">Ability.executeEvent</a> | <a href="event.md">Event.Connect</a></p>
<hr />
<p>Example using:</p>
<h3 id="interruptedevent"><a class="toclink" href="#interruptedevent"><code>interruptedEvent</code></a></h3>
<p>The <code>interruptedEvent</code> fires when an ability is going through it's activation process and <code>Interrupt()</code> is called on it, or if it becomes disabled. In this example, interruption is a key part of the game design, so a visual effect is spawned at the player's position to help communicate the interaction between players.</p>
<div class="highlight"><pre><span></span><code><span class="c1">--Server script</span>
<span class="kd">local</span> <span class="n">ability</span> <span class="o">=</span> <span class="n">script</span><span class="p">.</span><span class="n">parent</span>
<span class="kd">local</span> <span class="n">interruptedVfx</span> <span class="o">=</span> <span class="n">script</span><span class="p">:</span><span class="n">GetCustomProperty</span><span class="p">(</span><span class="s2">&quot;InterruptedVfx&quot;</span><span class="p">)</span>

<span class="kr">function</span> <span class="nf">OnInterrupted</span><span class="p">(</span><span class="n">ability</span><span class="p">)</span>
    <span class="kr">if</span> <span class="n">Object</span><span class="p">.</span><span class="n">IsValid</span><span class="p">(</span><span class="n">ability</span><span class="p">.</span><span class="n">owner</span><span class="p">)</span> <span class="kr">then</span>
        <span class="n">World</span><span class="p">.</span><span class="n">SpawnAsset</span><span class="p">(</span><span class="n">interruptedVfx</span><span class="p">,</span> <span class="p">{</span><span class="n">position</span> <span class="o">=</span> <span class="n">ability</span><span class="p">.</span><span class="n">owner</span><span class="p">:</span><span class="n">GetWorldPosition</span><span class="p">()})</span>
    <span class="kr">end</span>
<span class="kr">end</span>

<span class="n">ability</span><span class="p">.</span><span class="n">interruptedEvent</span><span class="p">:</span><span class="n">Connect</span><span class="p">(</span><span class="n">OnInterrupted</span><span class="p">)</span>
</code></pre></div>
<p>See also: <a href="coreobject.md">CoreObject.parent</a> | <a href="object.md">Object.IsValid</a> | <a href="ability.md">Ability.owner</a> | <a href="world.md">World.SpawnAsset</a> | <a href="player.md">Player.GetWorldPosition</a> | <a href="event.md">Event.Connect</a></p>
<hr />
<p>Example using:</p>
<h3 id="readyevent"><a class="toclink" href="#readyevent"><code>readyEvent</code></a></h3>
<p>The Ready phase begins when an ability comes off cooldown and is "ready" to be used again. In this example, we create an invisibility effect that takes advantage of the <code>readyEvent</code>, leveraging the cooldown duration of the ability as a clock to determine when to make the player visible again.</p>
<div class="highlight"><pre><span></span><code><span class="c1">-- Server script</span>
<span class="kd">local</span> <span class="n">ability</span> <span class="o">=</span> <span class="n">script</span><span class="p">.</span><span class="n">parent</span>

<span class="kr">function</span> <span class="nf">OnExecute</span><span class="p">(</span><span class="n">ability</span><span class="p">)</span>
    <span class="c1">-- Hide the player</span>
    <span class="n">ability</span><span class="p">.</span><span class="n">owner</span><span class="p">:</span><span class="n">SetVisibility</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nf">OnReady</span><span class="p">(</span><span class="n">ability</span><span class="p">)</span>
    <span class="c1">-- Show the player</span>
    <span class="n">ability</span><span class="p">.</span><span class="n">owner</span><span class="p">:</span><span class="n">SetVisibility</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
<span class="kr">end</span>

<span class="n">ability</span><span class="p">.</span><span class="n">readyEvent</span><span class="p">:</span><span class="n">Connect</span><span class="p">(</span><span class="n">OnReady</span><span class="p">)</span>
<span class="n">ability</span><span class="p">.</span><span class="n">executeEvent</span><span class="p">:</span><span class="n">Connect</span><span class="p">(</span><span class="n">OnExecute</span><span class="p">)</span>
</code></pre></div>
<p>See also: <a href="coreobject.md">CoreObject.parent</a> | <a href="ability.md">Ability.owner</a> | <a href="player.md">Player.SetVisibility</a> | <a href="event.md">Event.Connect</a></p>
<hr />
<p>Example using:</p>
<h3 id="recoveryevent"><a class="toclink" href="#recoveryevent"><code>recoveryEvent</code></a></h3>
<p>The <code>recoveryEvent</code> marks the end of an ability's Execute phase and the beginning of its Recovery phase. In this example, a melee punch ability has a trigger that causes damage to enemies who overlap it. For it to work the trigger is only enabled for a brief moment, during the Execute phase.</p>
<div class="highlight"><pre><span></span><code><span class="c1">--Server script</span>
<span class="kd">local</span> <span class="n">ability</span> <span class="o">=</span> <span class="n">script</span><span class="p">.</span><span class="n">parent</span>
<span class="kd">local</span> <span class="n">trigger</span> <span class="o">=</span> <span class="n">script</span><span class="p">:</span><span class="n">GetCustomProperty</span><span class="p">(</span><span class="s2">&quot;ImpactTrigger&quot;</span><span class="p">):</span><span class="n">WaitForObject</span><span class="p">()</span>
<span class="n">trigger</span><span class="p">.</span><span class="n">collision</span> <span class="o">=</span> <span class="n">Collision</span><span class="p">.</span><span class="n">FORCE_OFF</span>

<span class="kd">local</span> <span class="n">DAMAGE_AMOUNT</span> <span class="o">=</span> <span class="mi">10</span>

<span class="kr">function</span> <span class="nf">OnExecute</span><span class="p">(</span><span class="n">ability</span><span class="p">)</span>
    <span class="n">trigger</span><span class="p">.</span><span class="n">collision</span> <span class="o">=</span> <span class="n">Collision</span><span class="p">.</span><span class="n">FORCE_ON</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nf">OnRecovery</span><span class="p">(</span><span class="n">ability</span><span class="p">)</span>
    <span class="n">trigger</span><span class="p">.</span><span class="n">collision</span> <span class="o">=</span> <span class="n">Collision</span><span class="p">.</span><span class="n">FORCE_OFF</span>
<span class="kr">end</span>

<span class="n">ability</span><span class="p">.</span><span class="n">executeEvent</span><span class="p">:</span><span class="n">Connect</span><span class="p">(</span><span class="n">OnExecute</span><span class="p">)</span>
<span class="n">ability</span><span class="p">.</span><span class="n">recoveryEvent</span><span class="p">:</span><span class="n">Connect</span><span class="p">(</span><span class="n">OnRecovery</span><span class="p">)</span>

<span class="kr">function</span> <span class="nf">OnBeginOverlap</span><span class="p">(</span><span class="n">trigger</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
    <span class="c1">-- Only damage enemy players</span>
    <span class="kr">if</span> <span class="n">other</span><span class="p">:</span><span class="n">IsA</span><span class="p">(</span><span class="s2">&quot;Player&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">other</span><span class="p">.</span><span class="n">team</span> <span class="o">~=</span> <span class="n">ability</span><span class="p">.</span><span class="n">owner</span><span class="p">.</span><span class="n">team</span> <span class="kr">then</span>
        <span class="n">other</span><span class="p">:</span><span class="n">ApplyDamage</span><span class="p">(</span><span class="n">Damage</span><span class="p">.</span><span class="n">New</span><span class="p">(</span><span class="n">DAMAGE_AMOUNT</span><span class="p">))</span>
    <span class="kr">end</span>
<span class="kr">end</span>

<span class="n">trigger</span><span class="p">.</span><span class="n">beginOverlapEvent</span><span class="p">:</span><span class="n">Connect</span><span class="p">(</span><span class="n">OnBeginOverlap</span><span class="p">)</span>
</code></pre></div>
<p>See also: <a href="coreobject.md">CoreObject.parent</a> | <a href="coreobjectreference.md">CoreObjectReference.WaitForObject</a> | <a href="ability.md">Ability.executeEvent</a> | <a href="event.md">Event.Connect</a> | <a href="other.md">other.IsA</a> | <a href="player.md">Player.team</a> | <a href="damage.md">Damage.New</a> | <a href="trigger.md">Trigger.beginOverlapEvent</a></p>
<hr />
<p>Example using:</p>
<h3 id="tickevent"><a class="toclink" href="#tickevent"><code>tickEvent</code></a></h3>
<p>Abilities fire the <code>tickEvent</code> while they are active or on cooldown (not on Ready state). In this example, a piece of equipment carries several abilities, but we want to do a common update logic on all of them. Note: <code>Ability.tickEvent</code> works somewhat differently from a <code>Tick()</code> function - <code>tickEvent</code> is an actual event that just happens to fire once per tick. Each invocation of the callback runs on its own task. This means that, unlike <code>Tick()</code>, there is no guarantee that it will wait for the previous <code>tickEvent</code> to finish before starting the next one. This means you can't use things like <code>Task.Wait()</code> to add time between ticks.</p>
<div class="highlight"><pre><span></span><code><span class="kd">local</span> <span class="n">equipment</span> <span class="o">=</span> <span class="n">script</span><span class="p">.</span><span class="n">parent</span>
<span class="kd">local</span> <span class="n">allAbilities</span> <span class="o">=</span> <span class="n">equipment</span><span class="p">:</span><span class="n">GetAbilities</span><span class="p">()</span>

<span class="kr">function</span> <span class="nf">OnTick</span><span class="p">(</span><span class="n">ability</span><span class="p">,</span> <span class="n">deltaTime</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Updating ability &quot;</span> <span class="o">..</span> <span class="n">ability</span><span class="p">.</span><span class="n">name</span><span class="p">)</span>
<span class="kr">end</span>

<span class="kr">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">ability</span> <span class="kr">in</span> <span class="nb">ipairs</span><span class="p">(</span><span class="n">allAbilities</span><span class="p">)</span> <span class="kr">do</span>
    <span class="n">ability</span><span class="p">.</span><span class="n">tickEvent</span><span class="p">:</span><span class="n">Connect</span><span class="p">(</span><span class="n">OnTick</span><span class="p">)</span>
<span class="kr">end</span>
</code></pre></div>
<p>See also: <a href="coreobject.md">CoreObject.parent</a> | <a href="equipment.md">Equipment.GetAbilities</a> | <a href="event.md">Event.Connect</a> | <a href="coreluafunctions.md">CoreLua.print</a></p>
<hr />
<p>Example using:</p>
<h3 id="activate"><a class="toclink" href="#activate"><code>Activate</code></a></h3>
<p>The Ability <code>Activate()</code> function behaves as if the player had pressed the key binding. In order for a server gameplay decision to result in an ability activation, it must be communicated over the network somehow. In this example, a trigger overlap is representative of an arbitrary gameplay decision on the server. A broadcast message is sent to the client, who receives the event and activates the ability.</p>
<div class="highlight"><pre><span></span><code><span class="c1">--Server script</span>
<span class="kd">local</span> <span class="n">trigger</span> <span class="o">=</span> <span class="n">script</span><span class="p">.</span><span class="n">parent</span>
<span class="kd">local</span> <span class="kr">function</span> <span class="nf">OnBeginOverlap</span><span class="p">(</span><span class="n">trigger</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
    <span class="kr">if</span> <span class="n">other</span><span class="p">:</span><span class="n">IsA</span><span class="p">(</span><span class="s2">&quot;Player&quot;</span><span class="p">)</span> <span class="kr">then</span>
        <span class="n">Events</span><span class="p">.</span><span class="n">BroadcastToPlayer</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="s2">&quot;SteppedOnObject&quot;</span><span class="p">)</span>
    <span class="kr">end</span>
<span class="kr">end</span>

<span class="n">trigger</span><span class="p">.</span><span class="n">beginOverlapEvent</span><span class="p">(</span><span class="n">OnBeginOverlap</span><span class="p">)</span>

<span class="cm">--[[#description</span>
<span class="cm">    Client context script under the ability:</span>
<span class="cm">]]</span>
<span class="kd">local</span> <span class="n">ability</span> <span class="o">=</span> <span class="n">script</span><span class="p">:</span><span class="n">FindAncestorByType</span><span class="p">(</span><span class="s2">&quot;Ability&quot;</span><span class="p">)</span>

<span class="kr">function</span> <span class="nf">OnPlayAnimation</span><span class="p">()</span>
    <span class="kr">if</span> <span class="n">ability</span><span class="p">.</span><span class="n">owner</span> <span class="ow">and</span> <span class="n">ability</span><span class="p">.</span><span class="n">owner</span> <span class="o">==</span> <span class="n">Game</span><span class="p">.</span><span class="n">GetLocalPlayer</span><span class="p">()</span> <span class="kr">then</span>
        <span class="n">ability</span><span class="p">:</span><span class="n">Activate</span><span class="p">()</span>
    <span class="kr">end</span>
<span class="kr">end</span>

<span class="n">Events</span><span class="p">.</span><span class="n">Connect</span><span class="p">(</span><span class="s2">&quot;SteppedOnObject&quot;</span><span class="p">,</span> <span class="n">OnPlayAnimation</span><span class="p">)</span>
</code></pre></div>
<p>See also: <a href="coreobject.md">CoreObject.parent</a> | <a href="trigger.md">Trigger.beginOverlapEvent</a> | <a href="other.md">other.IsA</a> | <a href="events.md">Events.BroadcastToPlayer</a> | <a href="ability.md">Ability.owner</a> | <a href="game.md">Game.GetLocalPlayer()</a></p>
<hr />
<p>Example using:</p>
<h3 id="advancephase"><a class="toclink" href="#advancephase"><code>AdvancePhase</code></a></h3>
<h3 id="getcurrentphase"><a class="toclink" href="#getcurrentphase"><code>GetCurrentPhase</code></a></h3>
<p>In this example an ability is on cooldown, but can be set back to <code>Ready</code> by calling <code>AdvancePhase()</code>.</p>
<div class="highlight"><pre><span></span><code><span class="kr">function</span> <span class="nf">EndAbilityCooldown</span><span class="p">(</span><span class="n">ability</span><span class="p">)</span>
    <span class="kr">if</span> <span class="n">ability</span><span class="p">:</span><span class="n">GetCurrentPhase</span><span class="p">()</span> <span class="o">==</span> <span class="n">AbilityPhase</span><span class="p">.</span><span class="n">COOLDOWN</span> <span class="kr">then</span>
        <span class="n">ability</span><span class="p">:</span><span class="n">AdvancePhase</span><span class="p">()</span>
    <span class="kr">end</span>
<span class="kr">end</span>
</code></pre></div>
<hr />
<p>Example using:</p>
<h3 id="getcurrentphase_1"><a class="toclink" href="#getcurrentphase_1"><code>GetCurrentPhase</code></a></h3>
<h3 id="getphasetimeremaining"><a class="toclink" href="#getphasetimeremaining"><code>GetPhaseTimeRemaining</code></a></h3>
<p>In this example, while the ability is on cooldown, the percentage completion of the cooldown is calculated. This could be useful, for instance, in displaying user interface.</p>
<div class="highlight"><pre><span></span><code><span class="kd">local</span> <span class="n">ability</span> <span class="o">=</span> <span class="n">script</span><span class="p">:</span><span class="n">FindAncestorByType</span><span class="p">(</span><span class="s2">&quot;Ability&quot;</span><span class="p">)</span>

<span class="kr">function</span> <span class="nf">Tick</span><span class="p">()</span>
    <span class="kr">if</span> <span class="n">ability</span><span class="p">:</span><span class="n">GetCurrentPhase</span><span class="p">()</span> <span class="o">==</span> <span class="n">AbilityPhase</span><span class="p">.</span><span class="n">COOLDOWN</span> <span class="kr">then</span>
        <span class="kd">local</span> <span class="n">duration</span> <span class="o">=</span> <span class="n">ability</span><span class="p">.</span><span class="n">cooldownPhaseSettings</span><span class="p">.</span><span class="n">duration</span>
        <span class="kd">local</span> <span class="n">remaining</span> <span class="o">=</span> <span class="n">ability</span><span class="p">:</span><span class="n">GetPhaseTimeRemaining</span><span class="p">()</span>
        <span class="kd">local</span> <span class="n">percent</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">remaining</span> <span class="o">/</span> <span class="n">duration</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Cooldown remaining: %&quot;</span> <span class="o">..</span> <span class="nb">string.format</span><span class="p">(</span><span class="s2">&quot;%.2f&quot;</span><span class="p">,</span><span class="n">percent</span><span class="p">))</span>
    <span class="kr">end</span>
<span class="kr">end</span>
</code></pre></div>
<p>See also: <a href="coreobject.md">CoreObject.FindAncestorByType</a> | <a href="ability.md">Ability.GetCurrentPhase</a> | <a href="abilityphasesettings.md">AbilityPhaseSettings.duration</a> | <a href="coreluafunctions.md">CoreLua.print</a></p>
<hr />
<p>Example using:</p>
<h3 id="gettargetdata"><a class="toclink" href="#gettargetdata"><code>GetTargetData</code></a></h3>
<h3 id="settargetdata"><a class="toclink" href="#settargetdata"><code>SetTargetData</code></a></h3>
<p>The ability's targeting data gives a lot of information about where and what the player is aiming at. If setup correctly, it can also be modified programmatically. In this example, the Z position of the target is flattened horizontally. Useful, for example, in a top-down shooter. For this to work it should be placed in a client context under the ability. The ability should also have the option "Is Target Data Update" turned off for the Execute phase, otherwise any data set programmatically will be overwritten when the phase changes.</p>
<div class="highlight"><pre><span></span><code><span class="c1">--Server script</span>
<span class="kd">local</span> <span class="n">ability</span> <span class="o">=</span> <span class="n">script</span><span class="p">:</span><span class="n">FindAncestorByType</span><span class="p">(</span><span class="s2">&quot;Ability&quot;</span><span class="p">)</span>

<span class="kr">function</span> <span class="nf">OnCast</span><span class="p">(</span><span class="n">ability</span><span class="p">)</span>
    <span class="kd">local</span> <span class="n">abilityTarget</span> <span class="o">=</span> <span class="n">ability</span><span class="p">:</span><span class="n">GetTargetData</span><span class="p">()</span>
    <span class="kd">local</span> <span class="n">pos</span> <span class="o">=</span> <span class="n">abilityTarget</span><span class="p">:</span><span class="n">GetHitPosition</span><span class="p">()</span>

    <span class="n">pos</span><span class="p">.</span><span class="n">z</span> <span class="o">=</span> <span class="n">ability</span><span class="p">.</span><span class="n">owner</span><span class="p">:</span><span class="n">GetWorldPosition</span><span class="p">().</span><span class="n">z</span> <span class="o">+</span> <span class="mi">50</span>

    <span class="n">abilityTarget</span><span class="p">:</span><span class="n">SetHitPosition</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
    <span class="n">ability</span><span class="p">:</span><span class="n">SetTargetData</span><span class="p">(</span><span class="n">abilityTarget</span><span class="p">)</span>
<span class="kr">end</span>

<span class="n">ability</span><span class="p">.</span><span class="n">castEvent</span><span class="p">:</span><span class="n">Connect</span><span class="p">(</span><span class="n">OnCast</span><span class="p">)</span>
</code></pre></div>
<p>See also: <a href="coreobject.md">CoreObject.FindAncestorByType</a> | <a href="abilitytarget.md">AbilityTarget.GetHitPosition</a> | <a href="ability.md">Ability.owner</a> | <a href="player.md">Player.GetWorldPosition</a> | <a href="event.md">Event.Connect</a></p>
<hr />
<p>Example using:</p>
<h3 id="interrupt"><a class="toclink" href="#interrupt"><code>Interrupt</code></a></h3>
<p>Interrupting an ability either sends it back into ready state (if it was still in the Cast phase) or puts it on cooldown. In this example, we have an ability that searches for all enemies in a 10 meter radius and interrupts their abilities.</p>
<div class="highlight"><pre><span></span><code><span class="c1">--Server script</span>
<span class="kd">local</span> <span class="n">ability</span> <span class="o">=</span> <span class="n">script</span><span class="p">.</span><span class="n">parent</span>
<span class="kd">local</span> <span class="n">RADIUS</span> <span class="o">=</span> <span class="mi">1000</span> <span class="c1">-- 10 meters</span>

<span class="kr">function</span> <span class="nf">OnExecute</span><span class="p">(</span><span class="n">ability</span><span class="p">)</span>
    <span class="kd">local</span> <span class="n">center</span> <span class="o">=</span> <span class="n">ability</span><span class="p">.</span><span class="n">owner</span><span class="p">:</span><span class="n">GetWorldPosition</span><span class="p">()</span>
    <span class="c1">-- Search for enemies</span>
    <span class="kd">local</span> <span class="n">enemies</span> <span class="o">=</span> <span class="n">Game</span><span class="p">.</span><span class="n">FindPlayersInCylinder</span><span class="p">(</span><span class="n">center</span><span class="p">,</span> <span class="n">RADIUS</span><span class="p">,</span> <span class="p">{</span><span class="n">ignoreTeams</span> <span class="o">=</span> <span class="n">ability</span><span class="p">.</span><span class="n">owner</span><span class="p">.</span><span class="n">team</span><span class="p">})</span>
    <span class="kr">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">enemy</span> <span class="kr">in</span> <span class="nb">ipairs</span><span class="p">(</span><span class="n">enemies</span><span class="p">)</span> <span class="kr">do</span>
        <span class="c1">-- Interrupt all their abilities</span>
        <span class="kd">local</span> <span class="n">enemyAbilities</span> <span class="o">=</span> <span class="n">enemy</span><span class="p">:</span><span class="n">GetAbilities</span><span class="p">()</span>
        <span class="kr">for</span> <span class="n">_</span><span class="p">,</span><span class="n">a</span> <span class="kr">in</span> <span class="nb">ipairs</span><span class="p">(</span><span class="n">enemyAbilities</span><span class="p">)</span> <span class="kr">do</span>
            <span class="n">a</span><span class="p">:</span><span class="n">Interrupt</span><span class="p">()</span>
        <span class="kr">end</span>
    <span class="kr">end</span>
<span class="kr">end</span>

<span class="n">ability</span><span class="p">.</span><span class="n">executeEvent</span><span class="p">:</span><span class="n">Connect</span><span class="p">(</span><span class="n">OnExecute</span><span class="p">)</span>
</code></pre></div>
<p>See also: <a href="coreobject.md">CoreObject.parent</a> | <a href="ability.md">Ability.owner</a> | <a href="player.md">Player.GetWorldPosition</a> | <a href="game.md">Game.FindPlayersInCylinder</a> | <a href="event.md">Event.Connect</a></p>
<hr />
<p>Example using:</p>
<h3 id="actionname"><a class="toclink" href="#actionname"><code>actionName</code></a></h3>
<p>Even though some API properties are read-only, they are useful is solutions such as user interface. In this example, a client context script searches the local player's list of abilities to find one that matches the action name (input) designated for this UI component. When it's found, the ability's name is written to the UI Text object.</p>
<div class="highlight"><pre><span></span><code><span class="c1">--Client script</span>
<span class="kd">local</span> <span class="n">ACTION_NAME</span> <span class="o">=</span> <span class="n">script</span><span class="p">:</span><span class="n">GetCustomProperty</span><span class="p">(</span><span class="s2">&quot;ActionName&quot;</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">NAME_UI</span> <span class="o">=</span> <span class="n">script</span><span class="p">:</span><span class="n">GetCustomProperty</span><span class="p">(</span><span class="s2">&quot;NameUIText&quot;</span><span class="p">):</span><span class="n">WaitForObject</span><span class="p">()</span>

<span class="kr">function</span> <span class="nf">GetLocalPlayerAbilityWithActionName</span><span class="p">()</span>
    <span class="kd">local</span> <span class="n">player</span> <span class="o">=</span> <span class="n">Game</span><span class="p">.</span><span class="n">GetLocalPlayer</span><span class="p">()</span>
    <span class="kd">local</span> <span class="n">abilities</span> <span class="o">=</span> <span class="n">player</span><span class="p">:</span><span class="n">GetAbilities</span><span class="p">()</span>

    <span class="kr">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">ability</span> <span class="kr">in</span> <span class="nb">pairs</span><span class="p">(</span><span class="n">abilities</span><span class="p">)</span> <span class="kr">do</span>
        <span class="kr">if</span> <span class="n">ability</span><span class="p">.</span><span class="n">actionName</span> <span class="o">==</span> <span class="n">ACTION_NAME</span> <span class="kr">then</span>
            <span class="kr">return</span> <span class="n">ability</span>
        <span class="kr">end</span>
    <span class="kr">end</span>

    <span class="kr">return</span> <span class="kc">nil</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nf">Tick</span><span class="p">()</span>
    <span class="kd">local</span> <span class="n">ability</span> <span class="o">=</span> <span class="n">GetLocalPlayerAbilityWithActionName</span><span class="p">()</span>
    <span class="kr">if</span> <span class="n">ability</span> <span class="kr">then</span>
        <span class="n">NAME_UI</span><span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">ability</span><span class="p">.</span><span class="n">name</span>
    <span class="kr">end</span>
<span class="kr">end</span>
</code></pre></div>
<p>See also: <a href="coreobject.md">CoreObject.name</a> | <a href="coreobjectreference.md">CoreObjectReference.WaitForObject</a> | <a href="game.md">Game.GetLocalPlayer</a> | <a href="player.md">Player.GetAbilities</a> | <a href="uitext.md">UIText.text</a></p>
<hr />
<p>Example using:</p>
<h3 id="animation"><a class="toclink" href="#animation"><code>animation</code></a></h3>
<p>In this example, the <code>ProcessAbilities()</code> function can be called once, such as at the beginning of a round, to take inventory of a player's abilities and classify them based on animation. This example also demonstrates how to disconnect event listeners so that we don't listen for the same event multiple times.</p>
<div class="highlight"><pre><span></span><code><span class="c1">--Server script</span>
<span class="kr">function</span> <span class="nf">OnMelee1HandCast</span><span class="p">(</span><span class="n">ability</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;One-handed melee attack&quot;</span><span class="p">)</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nf">OnMelee2HandCast</span><span class="p">(</span><span class="n">ability</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Two-handed melee attack&quot;</span><span class="p">)</span>
<span class="kr">end</span>

<span class="kd">local</span> <span class="n">abilityEventListeners</span> <span class="o">=</span> <span class="p">{}</span>

<span class="kr">function</span> <span class="nf">CleanupListeners</span><span class="p">(</span><span class="n">player</span><span class="p">)</span>
    <span class="c1">-- If we have previously processed this player, cleanup all listeners</span>
    <span class="kr">if</span> <span class="n">abilityEventListeners</span><span class="p">[</span><span class="n">player</span><span class="p">]</span> <span class="kr">then</span>
        <span class="kr">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">eventListener</span> <span class="kr">in</span> <span class="nb">ipairs</span><span class="p">(</span><span class="n">abilityEventListeners</span><span class="p">[</span><span class="n">player</span><span class="p">])</span> <span class="kr">do</span>
            <span class="n">eventListener</span><span class="p">:</span><span class="n">Disconnect</span><span class="p">()</span>
        <span class="kr">end</span>
        <span class="n">abilityEventListeners</span><span class="p">[</span><span class="n">player</span><span class="p">]</span> <span class="o">=</span> <span class="kc">nil</span>
    <span class="kr">end</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nf">ProcessAbilities</span><span class="p">(</span><span class="n">player</span><span class="p">)</span>
    <span class="n">CleanupListeners</span><span class="p">(</span><span class="n">player</span><span class="p">)</span>

    <span class="kd">local</span> <span class="n">allAbilities</span> <span class="o">=</span> <span class="n">player</span><span class="p">:</span><span class="n">GetAbilities</span><span class="p">()</span>

    <span class="kr">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">ability</span> <span class="kr">in</span> <span class="nb">ipairs</span><span class="p">(</span><span class="n">allAbilities</span><span class="p">)</span> <span class="kr">do</span>
        <span class="kr">if</span> <span class="nb">string.match</span><span class="p">(</span><span class="n">ability</span><span class="p">.</span><span class="n">animation</span><span class="p">,</span> <span class="s2">&quot;melee&quot;</span><span class="p">)</span> <span class="kr">then</span>
            <span class="kd">local</span> <span class="n">eventListener</span>
            <span class="kr">if</span> <span class="nb">string.match</span><span class="p">(</span><span class="n">ability</span><span class="p">.</span><span class="n">animation</span><span class="p">,</span> <span class="s2">&quot;1h&quot;</span><span class="p">)</span> <span class="kr">then</span>
                <span class="n">eventListener</span> <span class="o">=</span> <span class="n">ability</span><span class="p">.</span><span class="n">castEvent</span><span class="p">:</span><span class="n">Connect</span><span class="p">(</span><span class="n">OnMelee1HandCast</span><span class="p">)</span>
            <span class="kr">else</span>
                <span class="n">eventListener</span> <span class="o">=</span> <span class="n">ability</span><span class="p">.</span><span class="n">castEvent</span><span class="p">:</span><span class="n">Connect</span><span class="p">(</span><span class="n">OnMelee2HandCast</span><span class="p">)</span>
            <span class="kr">end</span>
            <span class="nb">table.insert</span><span class="p">(</span><span class="n">abilityEventListeners</span><span class="p">[</span><span class="n">player</span><span class="p">],</span> <span class="n">eventListener</span><span class="p">)</span>
        <span class="kr">end</span>
    <span class="kr">end</span>
<span class="kr">end</span>

<span class="c1">-- Lets also cleanup when a player leaves the game, as perhaps their ability objects might stay in the game.</span>
<span class="n">Game</span><span class="p">.</span><span class="n">playerLeftEvent</span><span class="p">:</span><span class="n">Connect</span><span class="p">(</span><span class="n">CleanupListeners</span><span class="p">)</span>
</code></pre></div>
<p>See also: <a href="eventlistener.md">EventListener.Disconnect</a> | <a href="player.md">Player.GetAbilities</a> | <a href="ability.md">Ability.castEvent</a> | <a href="event.md">Event.Connect</a> | <a href="game.md">Game.playerLeftEvent</a> | <a href="coreluafunctions.md">CoreLua.print</a></p>
<hr />
<p>Example using:</p>
<h3 id="canactivatewhiledead"><a class="toclink" href="#canactivatewhiledead"><code>canActivateWhileDead</code></a></h3>
<p>Some games may have abilities that can be used while the player is dead. In this example, we have abilities that can <strong>only</strong> be activated while dead. If not dead, then it's interrupted.</p>
<div class="highlight"><pre><span></span><code><span class="c1">--Server script</span>
<span class="kd">local</span> <span class="n">ability</span> <span class="o">=</span> <span class="n">script</span><span class="p">:</span><span class="n">FindAncestorByType</span><span class="p">(</span><span class="s2">&quot;Ability&quot;</span><span class="p">)</span>

<span class="kr">function</span> <span class="nf">OnCast</span><span class="p">(</span><span class="n">ability</span><span class="p">)</span>
    <span class="kr">if</span> <span class="n">ability</span><span class="p">.</span><span class="n">canActivateWhileDead</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">ability</span><span class="p">.</span><span class="n">owner</span><span class="p">.</span><span class="n">isDead</span> <span class="kr">then</span>
        <span class="n">ability</span><span class="p">:</span><span class="n">Interrupt</span><span class="p">()</span>
    <span class="kr">end</span>
<span class="kr">end</span>

<span class="n">ability</span><span class="p">.</span><span class="n">castEvent</span><span class="p">:</span><span class="n">Connect</span><span class="p">(</span><span class="n">OnCast</span><span class="p">)</span>

<span class="cm">--[[#description</span>
<span class="cm">    On the client context, a user interface component that displays ability details is hidden until the player dies:</span>
<span class="cm">]]</span>
<span class="kd">local</span> <span class="n">abilityCanvas</span> <span class="o">=</span> <span class="n">script</span><span class="p">:</span><span class="n">GetCustomProperty</span><span class="p">(</span><span class="s2">&quot;Canvas&quot;</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">ACTION_NAME</span> <span class="o">=</span> <span class="n">script</span><span class="p">:</span><span class="n">GetCustomProperty</span><span class="p">(</span><span class="s2">&quot;ActionName&quot;</span><span class="p">)</span>

<span class="kr">function</span> <span class="nf">Tick</span><span class="p">(</span><span class="n">deltaTime</span><span class="p">)</span>
    <span class="kd">local</span> <span class="n">ability</span> <span class="o">=</span> <span class="n">GetLocalPlayerAbilityWithActionName</span><span class="p">()</span>

    <span class="kr">if</span> <span class="n">ability</span>
    <span class="ow">and</span> <span class="n">ability</span><span class="p">.</span><span class="n">isEnabled</span>
    <span class="ow">and</span> <span class="n">ability</span><span class="p">.</span><span class="n">canActivateWhileDead</span>
    <span class="ow">and</span> <span class="n">ability</span><span class="p">.</span><span class="n">owner</span>
    <span class="ow">and</span> <span class="n">ability</span><span class="p">.</span><span class="n">owner</span><span class="p">.</span><span class="n">isDead</span> <span class="kr">then</span>

        <span class="n">abilityCanvas</span><span class="p">.</span><span class="n">visibility</span> <span class="o">=</span> <span class="n">Visibility</span><span class="p">.</span><span class="n">INHERIT</span>
    <span class="kr">else</span>
        <span class="n">abilityCanvas</span><span class="p">.</span><span class="n">visibility</span> <span class="o">=</span> <span class="n">Visibility</span><span class="p">.</span><span class="n">FORCE_OFF</span>
    <span class="kr">end</span>
<span class="kr">end</span>

<span class="c1">-- Searches the local player&#39;s abilities until one with a matching action name is found</span>
<span class="c1">-- The ACTION_NAME search criteria should be set in the custom property</span>
<span class="kr">function</span> <span class="nf">GetLocalPlayerAbilityWithActionName</span><span class="p">()</span>
    <span class="kd">local</span> <span class="n">abilities</span> <span class="o">=</span> <span class="n">Game</span><span class="p">.</span><span class="n">GetLocalPlayer</span><span class="p">():</span><span class="n">GetAbilities</span><span class="p">()</span>
    <span class="kr">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">ability</span> <span class="kr">in</span> <span class="nb">pairs</span><span class="p">(</span><span class="n">abilities</span><span class="p">)</span> <span class="kr">do</span>
        <span class="kr">if</span> <span class="n">ability</span><span class="p">.</span><span class="n">actionName</span> <span class="o">==</span> <span class="n">ACTION_NAME</span> <span class="kr">then</span>
            <span class="kr">return</span> <span class="n">ability</span>
        <span class="kr">end</span>
    <span class="kr">end</span>

    <span class="kr">return</span> <span class="kc">nil</span>
<span class="kr">end</span>
</code></pre></div>
<p>See also: <a href="coreobject.md">CoreObject.FindAncestorByType</a> | <a href="ability.md">Ability.owner</a> | <a href="player.md">Player.isDead</a> | <a href="event.md">Event.Connect</a> | <a href="coreluafunctions.md">CoreLua.Tick</a></p>
<hr />
<p>Example using:</p>
<h3 id="canbeprevented"><a class="toclink" href="#canbeprevented"><code>canBePrevented</code></a></h3>
<p>In this example, an ability recognizes that it has been interrupted by the activation of another, special ability, that is setup to serve for animation cancelling. The <code>canBePrevented</code> property is usually true in this game, but in this special case it has been configured as false so that it can be activated at any time. The player gains vertical impulse as result of the synergy and hears a small audio cue that helps communicate the mechanic.</p>
<div class="highlight"><pre><span></span><code><span class="c1">--Server script</span>
<span class="kd">local</span> <span class="n">ability</span> <span class="o">=</span> <span class="n">script</span><span class="p">.</span><span class="n">parent</span>
<span class="kd">local</span> <span class="n">cancelSound</span> <span class="o">=</span> <span class="n">script</span><span class="p">:</span><span class="n">GetCustomProperty</span><span class="p">(</span><span class="s2">&quot;CancelSound&quot;</span><span class="p">)</span>

<span class="kr">function</span> <span class="nf">OnInterrupted</span><span class="p">(</span><span class="n">ability</span><span class="p">)</span>
    <span class="kd">local</span> <span class="n">player</span> <span class="o">=</span> <span class="n">ability</span><span class="p">.</span><span class="n">owner</span>
    <span class="kr">if</span> <span class="ow">not</span> <span class="n">Object</span><span class="p">.</span><span class="n">IsValid</span><span class="p">(</span><span class="n">player</span><span class="p">)</span> <span class="kr">then</span> <span class="kr">return</span> <span class="kr">end</span>

    <span class="kr">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">a</span> <span class="kr">in</span> <span class="nb">ipairs</span><span class="p">(</span><span class="n">player</span><span class="p">:</span><span class="n">GetAbilities</span><span class="p">())</span> <span class="kr">do</span>
        <span class="kr">if</span> <span class="n">a</span><span class="p">:</span><span class="n">GetCurrentPhase</span><span class="p">()</span> <span class="o">~=</span> <span class="n">AbilityPhase</span><span class="p">.</span><span class="n">READY</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">a</span><span class="p">.</span><span class="n">canBePrevented</span> <span class="kr">then</span>
            <span class="n">player</span><span class="p">:</span><span class="n">AddImpulse</span><span class="p">(</span><span class="n">Vector3</span><span class="p">.</span><span class="n">UP</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>
            <span class="n">World</span><span class="p">.</span><span class="n">SpawnAsset</span><span class="p">(</span><span class="n">cancelSound</span><span class="p">,</span> <span class="p">{</span><span class="n">position</span> <span class="o">=</span> <span class="n">player</span><span class="p">:</span><span class="n">GetWorldPosition</span><span class="p">()})</span>
            <span class="kr">return</span>
        <span class="kr">end</span>
    <span class="kr">end</span>
<span class="kr">end</span>

<span class="n">ability</span><span class="p">.</span><span class="n">interruptedEvent</span><span class="p">:</span><span class="n">Connect</span><span class="p">(</span><span class="n">OnInterrupted</span><span class="p">)</span>
</code></pre></div>
<p>See also: <a href="coreobject.md">CoreObject.parent</a> | <a href="ability.md">Ability.owner</a> | <a href="object.md">Object.IsValid</a> | <a href="player.md">Player.GetAbilities</a> | <a href="vector3.md">Vector3.UP</a> | <a href="world.md">World.SpawnAsset</a> | <a href="event.md">Event.Connect</a></p>
<hr />
<p>Example using:</p>
<h3 id="castphasesettings"><a class="toclink" href="#castphasesettings"><code>castPhaseSettings</code></a></h3>
<h3 id="executephasesettings"><a class="toclink" href="#executephasesettings"><code>executePhaseSettings</code></a></h3>
<h3 id="recoveryphasesettings"><a class="toclink" href="#recoveryphasesettings"><code>recoveryPhaseSettings</code></a></h3>
<h3 id="cooldownphasesettings"><a class="toclink" href="#cooldownphasesettings"><code>cooldownPhaseSettings</code></a></h3>
<p>In this example, a function in a client context script can be called to show the elapsed times for an ability. The UI Text it controls displays how many seconds are remaining in the current phase, and the color of the text blends from black to white to indicate the percentage of completion. Although the Execute and Recovery phases are actually separate, they are here presented to the player as a single phase.</p>
<div class="highlight"><pre><span></span><code><span class="c1">--Client script</span>
<span class="kd">local</span> <span class="n">COUNTDOWN_TEXT</span> <span class="o">=</span> <span class="n">script</span><span class="p">:</span><span class="n">GetCustomProperty</span><span class="p">(</span><span class="s2">&quot;CountdownText&quot;</span><span class="p">):</span><span class="n">WaitForObject</span><span class="p">()</span>

<span class="kr">function</span> <span class="nf">UpdateForAbility</span><span class="p">(</span><span class="n">ability</span><span class="p">)</span>
    <span class="kd">local</span> <span class="n">currentPhase</span> <span class="o">=</span> <span class="n">ability</span><span class="p">:</span><span class="n">GetCurrentPhase</span><span class="p">()</span>

    <span class="kd">local</span> <span class="n">percent</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="kd">local</span> <span class="n">cooldownText</span> <span class="o">=</span> <span class="s2">&quot;Ready&quot;</span>

    <span class="kr">if</span> <span class="n">currentPhase</span> <span class="o">~=</span> <span class="n">AbilityPhase</span><span class="p">.</span><span class="n">READY</span> <span class="kr">then</span>
        <span class="kd">local</span> <span class="n">phaseDuration</span>
        <span class="kd">local</span> <span class="n">timeRemaining</span> <span class="o">=</span> <span class="n">ability</span><span class="p">:</span><span class="n">GetPhaseTimeRemaining</span><span class="p">()</span>

        <span class="kr">if</span> <span class="n">currentPhase</span> <span class="o">==</span> <span class="n">AbilityPhase</span><span class="p">.</span><span class="n">CAST</span> <span class="kr">then</span>
            <span class="n">phaseDuration</span> <span class="o">=</span> <span class="n">ability</span><span class="p">.</span><span class="n">castPhaseSettings</span><span class="p">.</span><span class="n">duration</span>
        <span class="kr">elseif</span> <span class="n">currentPhase</span> <span class="o">==</span> <span class="n">AbilityPhase</span><span class="p">.</span><span class="n">EXECUTE</span> <span class="kr">then</span>
            <span class="c1">-- In the case of Execute and Recovery phases, we can show those as a single one</span>
            <span class="kd">local</span> <span class="n">recoveryD</span> <span class="o">=</span> <span class="n">ability</span><span class="p">.</span><span class="n">recoveryPhaseSettings</span><span class="p">.</span><span class="n">duration</span>
            <span class="n">phaseDuration</span> <span class="o">=</span> <span class="n">ability</span><span class="p">.</span><span class="n">executePhaseSettings</span><span class="p">.</span><span class="n">duration</span> <span class="o">+</span> <span class="n">recoveryD</span>
            <span class="n">timeRemaining</span> <span class="o">=</span> <span class="n">timeRemaining</span> <span class="o">+</span> <span class="n">recoveryD</span>
        <span class="kr">elseif</span> <span class="n">currentPhase</span> <span class="o">==</span> <span class="n">AbilityPhase</span><span class="p">.</span><span class="n">RECOVERY</span> <span class="kr">then</span>
            <span class="n">phaseDuration</span> <span class="o">=</span> <span class="n">ability</span><span class="p">.</span><span class="n">recoveryPhaseSettings</span><span class="p">.</span><span class="n">duration</span>
        <span class="kr">else</span> <span class="c1">--currentPhase == AbilityPhase.COOLDOWN</span>
            <span class="n">phaseDuration</span> <span class="o">=</span> <span class="n">ability</span><span class="p">.</span><span class="n">cooldownPhaseSettings</span><span class="p">.</span><span class="n">duration</span>
        <span class="kr">end</span>

        <span class="kr">if</span> <span class="n">phaseDuration</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="kr">then</span>
            <span class="n">percent</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">timeRemaining</span> <span class="o">/</span> <span class="n">phaseDuration</span>
        <span class="kr">end</span>
        <span class="n">cooldownText</span> <span class="o">=</span> <span class="nb">string.format</span><span class="p">(</span><span class="s2">&quot;%.1f&quot;</span><span class="p">,</span> <span class="n">timeRemaining</span><span class="p">)</span>
    <span class="kr">end</span>

    <span class="n">COUNTDOWN_TEXT</span><span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">cooldownText</span>

    <span class="kd">local</span> <span class="n">c</span> <span class="o">=</span> <span class="n">Color</span><span class="p">.</span><span class="n">Lerp</span><span class="p">(</span><span class="n">Color</span><span class="p">.</span><span class="n">BLACK</span><span class="p">,</span> <span class="n">Color</span><span class="p">.</span><span class="n">WHITE</span><span class="p">,</span> <span class="n">percent</span><span class="p">)</span>
    <span class="n">COUNTDOWN_TEXT</span><span class="p">:</span><span class="n">SetColor</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="kr">end</span>
</code></pre></div>
<p>See also: <a href="coreobject.md">CoreObject.GetCustomProperty</a> | <a href="coreobjectreference.md">CoreObjectReference.WaitForObject</a> | <a href="ability.md">Ability.GetCurrentPhase</a> | <a href="abilityphasesettings.md">AbilityPhaseSettings.duration</a> | <a href="uitext.md">UIText.text</a> | <a href="color.md">Color.Lerp</a></p>
<hr />
<p>Example using:</p>
<h3 id="isenabled"><a class="toclink" href="#isenabled"><code>isEnabled</code></a></h3>
<p>In this example, an equipment is setup with multiple abilities that all use the same action binding. This script cycles through the abilities, making sure only one is enabled at a time. The <code>owner</code> property is cleared for the previous ability and set for the next one, as part of ensuring the correct one activates when the binding is pressed.</p>
<div class="highlight"><pre><span></span><code><span class="c1">--Server script</span>
<span class="kd">local</span> <span class="n">equipment</span> <span class="o">=</span> <span class="n">script</span><span class="p">:</span><span class="n">FindAncestorByType</span><span class="p">(</span><span class="s2">&quot;Equipment&quot;</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">abilities</span> <span class="o">=</span> <span class="p">{}</span>
<span class="kd">local</span> <span class="n">abilityIndex</span> <span class="o">=</span> <span class="mi">1</span>

<span class="kr">function</span> <span class="nf">OnAbilityRecovery</span><span class="p">(</span><span class="n">ability</span><span class="p">)</span>
    <span class="kr">if</span> <span class="p">(</span><span class="o">#</span><span class="n">abilities</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="kr">then</span>
        <span class="n">abilities</span><span class="p">[</span><span class="n">abilityIndex</span><span class="p">].</span><span class="n">isEnabled</span> <span class="o">=</span> <span class="kc">false</span>
        <span class="n">abilities</span><span class="p">[</span><span class="n">abilityIndex</span><span class="p">].</span><span class="n">owner</span> <span class="o">=</span> <span class="kc">nil</span>

        <span class="n">abilityIndex</span> <span class="o">=</span> <span class="n">abilityIndex</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="kr">if</span> <span class="p">(</span><span class="n">abilityIndex</span> <span class="o">&gt;</span> <span class="o">#</span><span class="n">abilities</span><span class="p">)</span> <span class="kr">then</span>
            <span class="n">abilityIndex</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="kr">end</span>

        <span class="n">abilities</span><span class="p">[</span><span class="n">abilityIndex</span><span class="p">].</span><span class="n">isEnabled</span> <span class="o">=</span> <span class="kc">true</span>
        <span class="n">abilities</span><span class="p">[</span><span class="n">abilityIndex</span><span class="p">].</span><span class="n">owner</span> <span class="o">=</span> <span class="n">equipment</span><span class="p">.</span><span class="n">owner</span>
    <span class="kr">end</span>
<span class="kr">end</span>

<span class="kr">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">child</span> <span class="kr">in</span> <span class="nb">pairs</span><span class="p">(</span><span class="n">equipment</span><span class="p">:</span><span class="n">FindDescendantsByType</span><span class="p">(</span><span class="s2">&quot;Ability&quot;</span><span class="p">))</span> <span class="kr">do</span>
    <span class="nb">table.insert</span><span class="p">(</span><span class="n">abilities</span><span class="p">,</span> <span class="n">child</span><span class="p">)</span>

    <span class="n">child</span><span class="p">.</span><span class="n">isEnabled</span> <span class="o">=</span> <span class="p">(</span><span class="o">#</span><span class="n">abilities</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>

    <span class="n">child</span><span class="p">.</span><span class="n">recoveryEvent</span><span class="p">:</span><span class="n">Connect</span><span class="p">(</span><span class="n">OnAbilityRecovery</span><span class="p">)</span>
<span class="kr">end</span>
</code></pre></div>
<p>See also: <a href="coreobject.md">CoreObject.FindAncestorByType</a> | <a href="ability.md">Ability.owner</a> | <a href="equipment.md">Equipment.owner</a> | <a href="event.md">Event.Connect</a></p>
<hr />
<p>Example using:</p>
<h3 id="owner"><a class="toclink" href="#owner"><code>owner</code></a></h3>
<p>Usually, abilities are presented as part of an equipment, but that isn't a requirement. In this example, when new players join the game they are assigned an ability through the use of the <code>owner</code> property.</p>
<div class="highlight"><pre><span></span><code><span class="c1">--Server script</span>
<span class="kd">local</span> <span class="n">abilityTemplate</span> <span class="o">=</span> <span class="n">script</span><span class="p">:</span><span class="n">GetCustomProperty</span><span class="p">(</span><span class="s2">&quot;AbilityTemplate&quot;</span><span class="p">)</span>

<span class="kr">function</span> <span class="nf">OnPlayerJoined</span><span class="p">(</span><span class="n">player</span><span class="p">)</span>
    <span class="kd">local</span> <span class="n">ability</span> <span class="o">=</span> <span class="n">World</span><span class="p">.</span><span class="n">SpawnAsset</span><span class="p">(</span><span class="n">abilityTemplate</span><span class="p">)</span>
    <span class="n">ability</span><span class="p">.</span><span class="n">owner</span> <span class="o">=</span> <span class="n">player</span>
<span class="kr">end</span>

<span class="n">Game</span><span class="p">.</span><span class="n">playerJoinedEvent</span><span class="p">:</span><span class="n">Connect</span><span class="p">(</span><span class="n">OnPlayerJoined</span><span class="p">)</span>
</code></pre></div>
<p>See also: <a href="coreobject.md">CoreObject.GetCustomProperty</a> | <a href="world.md">World.SpawnAsset</a> | <a href="player.md">Player.owner</a> | <a href="game.md">Game.playerJoinedEvent</a> | <a href="event.md">Event.Connect</a></p>
<hr />
<h2 id="tutorials"><a class="toclink" href="#tutorials">Tutorials</a></h2>
<p><a href="../tutorials/ability_tutorial.md">Abilities in Core</a></p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.db81ec45.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.4b2c34cd.min.js"></script>
      
    
  </body>
</html>